<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Sistema PDV</title>
    <!-- Jquery minified -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <style>
      html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;    
      }
      #map {
        height: 100%;
        width: 30%;
        float: right;
        border: solid white;
      }
      h3 {
        color: white;
        text-align:  center;
      }
      #container{
        height: 40%;
        width: 100%;
      }
      .panel .panel-heading {
        background: #424242;
      }
      #main {
        float: left;
        margin-top: 2%;
      }
      #img {
        border: 5px solid white;
      }
    </style>
  </head>
  <body>
    
    <nav class="nav navbar-inverse">
      <h3>Sistema PDV</h3>
    </nav>

    <div class="container" id="container">

    <div id="main">
      <form class="form-inline" id="customer">
        <div class="form-group">
          <label for="cliente">Cliente :</label>
          <select id="select" class="form-control">
            <option>Selecione</option>
          </select>
            <label for="address">Endereço :</label>
            <input type="text" id="address" placeholder="Endereço do cliente" disabled class="form-control" />
        </div>
      </form>

      <hr />

      <form class="form-inline" id="itens">
          <div class="form-group">
            <input type="text" id="id" placeholder="Código" class="form-control" />
          </div>
      
          <div class="form-group">
            <input type="text" id="descricao" placeholder="Descrição" disabled class="form-control" />
          </div>
          
          <div class="form-group">
              <input type="text" id="valor" placeholder="Valor" disabled class="form-control" />
          </div>
    
          <div class="form-group">
            <input type="number" id="quantidade" placeholder="Quantidade" class="form-control" />
          </div>
    
          <button type="button" class="btn btn-default">+</button>
        </form>

        <div class="form-group">
            <img src="" id="img" class="img-responsive" />
        </div>

      </div>

      <div id="map"></div>

    </div>

    <div class="panel panel-default">
      <div class="panel-heading"><h3>Produtos</h3></div>

      <table class="table">
        <thead>
          <tr>
            <th>Código</th>
            <th>Descrição</th>
            <th>Quantidade</th>
            <th>Valor</th>
            <th>Excluir</th>
          </tr>
        </thead>
        <tbody>
          <tr>

          </tr>  
        </tbody>
      </table>
    </div>


    <script>
      // GOOGLE API MAPS //
      var myLatlng = {lat: -3.7421681, lng: -38.50189};
      
      function initMap() {
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 17,
          center: myLatlng
        });
        directionsDisplay.setMap(map);
      }
      // CUSTOMERS JSON //
      $.getJSON("customers.json", function(data) {
        $.each(data.customers, function(key, value) {
          $('#select').append('<option>'+ value.name +'</option>')     
          $('#select').change(function(){
            if(value.name == $('#select').val())
            $('#address').val(value.address);
          });
        });
      });

      // ITENS JSON //
      $('#id').focusout(function itens(){
        var id = $('#id').val();
        $.getJSON("itens.json", function(data) {
          var item;
          $.each(data.itens, function(key, value) {
            if(value.id == id) {
              item = value;
              return false;
            }
          });

        if (item != undefined) {
          $('#descricao').val(item.name);
          $('#valor').val(item.value);
          $('#img').attr("src", item.imagem);
          $('#quantidade').focus();
        } else {
          $('#descricao').val('');
          alert('Não existe produto com esse código!');
        }

        });
      });

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1p5sg8lJkUqB7TbPKKFrCQS78rm-MMas&&libraries=geometry,places&callback=initMap"
    async defer></script>
  </body>
</html>